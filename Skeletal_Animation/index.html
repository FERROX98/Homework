<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Skeletal Animation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:," />
    <link rel="stylesheet" href="./ui/stats.css" />
    <link rel="stylesheet" href="./ui/ui.css" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <canvas id="glcanvas"></canvas>

    // Model selector
    <div class="model-selector">
      <button id="prevModel" class="model-nav">◀</button>
      <span class="model-name">spaceship</span>
      <button id="nextModel" class="model-nav">▶</button>
    </div>

    // Stats
    <div id="stats-controls">
      <div id="stats-container">
        <button id="toggle-stats">Hide Stats</button>
        <div class="stat-row">
          <span class="stat-label">FPS:</span>
          <span id="fps" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Frame Time:</span>
          <span
            id="ms"
            class="stat-value ${parseInt(ms) > 33 ? 'danger' : parseInt(ms) > 20 ? 'warning' : ''}"
            >${ms}</span
          >
        </div>
        <div class="stat-row">
          <span class="stat-label">Memory:</span>
          <span id="mb" class="stat-value">${mb}</span>
        </div>
        <!-- <div class="stat-row">
          <span class="stat-label">Objects:</span>
          <span id="obj" class="stat-value">${scene.children.length}</span>
        </div> -->
        <div class="stat-row">
          <span class="stat-label">Triangles:</span>
          <span id="triangles" class="stat-value">-</span>
        </div>
        <!-- <div class="stat-row">
          <span class="stat-label">Geometries:</span>
          <span id="geometries" class="stat-value">${geometries}</span>
        </div> -->
        <!-- <div class="stat-row">
          <span class="stat-label">Textures:</span>
          <span id="tex" class="stat-value">${textures}</span>
        </div> -->
      </div>
    </div>

    // Button panel
    <div id="ui" style="position: fixed; top: 10px; left: 10px; z-index: 10">
      <button id="left-button-panel" >◀</button>
      <!-- <button id="right-button-panel">◀</button> -->
    </div>

    // ui panel 
    <div id="ui-panel">
      <!-- Header Buttons -->
      <div class="ui-button-row">
        <button id="resetDefaultsButton" class="ui-button warning">
          Reset to Default
        </button>
        <button id="collapseAllButton" class="ui-button ghost">
          Collapse All
        </button>
      </div>

      <!-- Lighting Section -->
      <div class="section">
        <div class="section-header">
          <h3>Lighting Controls</h3>
          <span class="section-toggle">▼</span>
        </div>
        <div class="section-content">
          <div class="control-group">
            <!-- Ambient Light -->
            <div class="slider-container">
              <label for="ambientIntensity">
                Ambient Light
                <span class="value-display" id="ambientIntensityValue"
                  >0.4</span
                >
              </label>
              <input
                type="range"
                id="ambientIntensity"
                min="0"
                max="1"
                step="0.1"
                value="0.4"
              />
            </div>

            <!-- Directional Light -->
            <div class="slider-container">
              <label for="directionalIntensity">
                Sun Light
                <span class="value-display" id="directionalIntensityValue"
                  >1.0</span
                >
              </label>
              <input
                type="range"
                id="directionalIntensity"
                min="0"
                max="2"
                step="0.1"
                value="1.0"
              />
            </div>

            <!-- Light Color -->
            <div class="slider-container">
              <label for="lightColor">Light Color</label>
              <input type="color" id="lightColor" value="#ffffff" />
            </div>

            <!-- Shadow Softness -->
            <div class="slider-container">
              <label for="shadowSoftness">
                Shadow Softness
                <span class="value-display" id="shadowSoftnessValue">1.0</span>
              </label>
              <input
                type="range"
                id="shadowSoftness"
                min="0"
                max="2"
                step="0.1"
                value="1.0"
              />
            </div>

            <!-- Shadow Mapping Toggle -->
            <div class="slider-container checkbox-inline">
              <label for="shadowMapping">Enable Shadow Mapping</label>
              <input type="checkbox" id="shadowMapping" checked />
            </div>

            <!-- Shadow Map Size -->
            <div class="slider-container">
              <label for="shadowMapSize">Shadow Map Size</label>
              <select id="shadowMapSize">
                <option value="512">512</option>
                <option value="1024">1024</option>
                <option value="2048" selected>2048</option>
                <option value="4096">4096</option>
              </select>
            </div>

            <!-- Shadow Map Type -->
            <div class="slider-container">
              <label for="shadowMapType">Shadow Map Type</label>
              <select id="shadowMapType">
                <option value="Basic">Basic</option>
                <option value="PCF">PCF</option>
                <option value="PCFSoft" selected>PCFSoft</option>
              </select>
            </div>

            <!-- Animate Sun -->
            <div class="slider-container checkbox-inline">
              <label for="animateSun">Animate Sun (Day/Night)</label>
              <input type="checkbox" id="animateSun" />
            </div>
            <div class="slider-container">
              <label for="sunSpeed"
                >Speed
                <span class="value-display" id="sunSpeedValue">1.0</span></label
              >
              <input
                type="range"
                id="sunSpeed"
                min="0.1"
                max="5"
                step="0.1"
                value="1.0"
              />
            </div>

            <!-- Shadow Overlay -->
            <div class="slider-container checkbox-inline">
              <label for="shadowOverlay">Shadow Overlay</label>
              <input type="checkbox" id="shadowOverlay" />
            </div>

            <!-- Sun Direction -->
            <div class="slider-container">
              <label for="sunX"
                >Sun Direction X
                <span class="value-display" id="sunXValue">5.0</span></label
              >
              <input
                type="range"
                id="sunX"
                min="-20"
                max="20"
                step="0.1"
                value="5"
              />

              <label for="sunY"
                >Sun Direction Y
                <span class="value-display" id="sunYValue">5.0</span></label
              >
              <input
                type="range"
                id="sunY"
                min="0.1"
                max="20"
                step="0.1"
                value="5"
              />

              <label for="sunZ"
                >Sun Direction Z
                <span class="value-display" id="sunZValue">5.0</span></label
              >
              <input
                type="range"
                id="sunZ"
                min="-20"
                max="20"
                step="0.1"
                value="5"
              />
            </div>

            <!-- Time of Day Presets -->
            <div class="slider-container">
              <label for="timeOfDayPreset">Time of Day Preset</label>
              <select id="timeOfDayPreset">
                <option value="custom">Custom</option>
                <option value="morning">Morning</option>
                <option value="noon">Noon</option>
                <option value="evening">Evening</option>
                <option value="night">Night</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Model Section -->
      <div class="section">
        <div class="section-header">
          <h3>Model</h3>
          <span class="section-toggle">▼</span>
        </div>
        <div class="section-content">
          <div class="slider-container checkbox-inline">
            <label for="textureToggle" class="checkbox-label">
              <span>Enable Textures</span>
              <input type="checkbox" id="textureToggle" checked />
            </label>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { main } from "./main.js";
      const canvas = document.getElementById("glcanvas");
      main(canvas);
    </script>
  </body>
</html>
